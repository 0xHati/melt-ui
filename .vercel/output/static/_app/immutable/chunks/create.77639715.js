import{b as c,c as D,a as W,g as _}from"./callbacks.6723c42c.js";import{a as b}from"./index.a1398546.js";import{g as x}from"./portal.080fdab2.js";import{k as a}from"./create.6a8ca084.js";import{d as S,w as v}from"./index.cb808db3.js";import{D as V}from"./scheduler.2943ef39.js";const{name:f}=D("accordion"),w={type:"single"},q=y=>{const m={...w,...y},l=v({disabled:m.disabled,type:m.type}),d=v(m.value),u=(e,s)=>s===void 0?!1:typeof s=="string"?s===e:s.includes(e),k=S(d,e=>s=>u(s,e)),g={root:x()},O=c(f(),{returned:()=>({"data-melt-id":g.root})}),p=e=>typeof e=="string"?{value:e}:e,A=c(f("item"),{stores:d,returned:e=>s=>{const{value:r,disabled:n}=p(s);return{"data-state":u(r,e)?"open":"closed","data-disabled":n?!0:void 0}}}),E=c(f("trigger"),{stores:[d,l],returned:([e,s])=>r=>{const{value:n,disabled:t}=p(r);return{"aria-expanded":!!u(n,e),disabled:s.disabled||t,"data-disabled":t?!0:void 0,"data-value":n}},action:e=>({destroy:W(b(e,"click",()=>{const r=V(l),n=e.dataset.disabled==="true",t=e.dataset.value;n||!t||d.update(o=>{if(r.type==="single")return o===t?void 0:t;{const i=o;return i===void 0?[t]:i.includes(t)?i.filter(h=>h!==t):[...i,t]}})}),b(e,"keydown",r=>{if(![a.ARROW_DOWN,a.ARROW_UP,a.HOME,a.END].includes(r.key))return;r.preventDefault();const n=r.target,t=_(g.root);if(!t)return;const o=Array.from(t.querySelectorAll("[data-melt-accordion-trigger]"));if(!o.length)return;const i=o.indexOf(n);r.key===a.ARROW_DOWN&&o[(i+1)%o.length].focus(),r.key===a.ARROW_UP&&o[(i-1+o.length)%o.length].focus(),r.key===a.HOME&&o[0].focus(),r.key===a.END&&o[o.length-1].focus()}))})}),R=c(f("content"),{stores:[d,l],returned:([e,s])=>r=>{const{value:n}=p(r),t=u(n,e);return{"data-state":t?"open":"closed","data-disabled":s.disabled?!0:void 0,hidden:t?void 0:!0}}});return{root:O,value:d,item:A,trigger:E,content:R,isSelected:k,options:l}};export{q as c};
