import{e as b,b as n}from"./callbacks.6723c42c.js";import{i as w}from"./index.a1398546.js";import{s as c}from"./style.928edf99.js";import{w as i}from"./index.cb808db3.js";const d={src:""},S=(m=d)=>{const r={...d,...m},{delayMs:a}=r,l=i(r.src),t=i("loading");b([l],([s])=>{if(w){const e=new Image;e.src=s,e.onload=()=>{if(a!==void 0){const o=window.setTimeout(()=>{t.set("loaded")},a);return()=>window.clearTimeout(o)}else t.set("loaded")},e.onerror=()=>{t.set("error")}}});const f=n("avatar-image",{stores:[l,t],returned:([s,e])=>{const o=c({display:e==="loaded"?"block":"none"});return{src:s,style:o}}}),u=n("avatar-fallback",{stores:[t],returned:([s])=>({style:c({display:s==="loaded"?"none":"block"})})});return{image:f,fallback:u}};export{S as c};
