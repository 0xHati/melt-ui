import{n as ve}from"./callbacks.6723c42c.js";import{a as be}from"./platform.c71352df.js";import{w as Z}from"./index.cb808db3.js";import{K as pe}from"./scheduler.2943ef39.js";function Ze(a){return new Promise(e=>setTimeout(e,a))}function z(a){return{subscribe:a.subscribe}}let he=(a=21)=>crypto.getRandomValues(new Uint8Array(a)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");function ze(){return he(10)}const q="data-melt-scroll-lock";function H(a,e){if(!a)return;const t=a.style.cssText;return Object.assign(a.style,e),()=>{a.style.cssText=t}}function ye(a,e,t){if(!a)return;const r=a.style.getPropertyValue(e);return a.style.setProperty(e,t),()=>{r?a.style.setProperty(e,r):a.style.removeProperty(e)}}function me(a){const e=a.getBoundingClientRect().left;return Math.round(e)+a.scrollLeft?"paddingLeft":"paddingRight"}function He(a){const e=a??document,t=e.defaultView??window,{documentElement:r,body:o}=e;if(o.hasAttribute(q))return ve;o.setAttribute(q,"");const n=t.innerWidth-r.clientWidth,f=()=>ye(r,"--scrollbar-width",`${n}px`),l=me(r),b=()=>H(o,{overflow:"hidden",[l]:`${n}px`}),w=()=>{const{scrollX:y,scrollY:T,visualViewport:S}=t,E=(S==null?void 0:S.offsetLeft)??0,k=(S==null?void 0:S.offsetTop)??0,P=H(o,{position:"fixed",overflow:"hidden",top:`${-(T-Math.floor(k))}px`,left:`${-(y-Math.floor(E))}px`,right:"0",[l]:`${n}px`});return()=>{P==null||P(),t.scrollTo(y,T)}},p=[f(),be()?w():b()];return()=>{p.forEach(y=>y==null?void 0:y()),o.removeAttribute(q)}}/*!
* tabbable 6.1.2
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var ae=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],L=ae.join(","),ne=typeof Element>"u",F=ne?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,x=!ne&&Element.prototype.getRootNode?function(a){var e;return a==null||(e=a.getRootNode)===null||e===void 0?void 0:e.call(a)}:function(a){return a==null?void 0:a.ownerDocument},K=function a(e,t){var r;t===void 0&&(t=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=o===""||o==="true",n=s||t&&e&&a(e.parentNode);return n},ge=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},ie=function(e,t,r){if(K(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(L));return t&&F.call(e,L)&&o.unshift(e),o=o.filter(r),o},oe=function a(e,t,r){for(var o=[],s=Array.from(e);s.length;){var n=s.shift();if(!K(n,!1))if(n.tagName==="SLOT"){var f=n.assignedElements(),l=f.length?f:n.children,b=a(l,!0,r);r.flatten?o.push.apply(o,b):o.push({scopeParent:n,candidates:b})}else{var w=F.call(n,L);w&&r.filter(n)&&(t||!e.includes(n))&&o.push(n);var p=n.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(n),y=!K(p,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(n));if(p&&y){var T=a(p===!0?n.children:p.children,!0,r);r.flatten?o.push.apply(o,T):o.push({scopeParent:n,candidates:T})}else s.unshift.apply(s,n.children)}}return o},ue=function(e,t){return e.tabIndex<0&&(t||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||ge(e))&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},we=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},se=function(e){return e.tagName==="INPUT"},Te=function(e){return se(e)&&e.type==="hidden"},Se=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},Ne=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},Fe=function(e){if(!e.name)return!0;var t=e.form||x(e),r=function(f){return t.querySelectorAll('input[type="radio"][name="'+f+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(n){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",n.message),!1}var s=Ne(o,e.form);return!s||s===e},Ee=function(e){return se(e)&&e.type==="radio"},Pe=function(e){return Ee(e)&&!Fe(e)},Ce=function(e){var t,r=e&&x(e),o=(t=r)===null||t===void 0?void 0:t.host,s=!1;if(r&&r!==e){var n,f,l;for(s=!!((n=o)!==null&&n!==void 0&&(f=n.ownerDocument)!==null&&f!==void 0&&f.contains(o)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&o;){var b,w,p;r=x(o),o=(b=r)===null||b===void 0?void 0:b.host,s=!!((w=o)!==null&&w!==void 0&&(p=w.ownerDocument)!==null&&p!==void 0&&p.contains(o))}}return s},J=function(e){var t=e.getBoundingClientRect(),r=t.width,o=t.height;return r===0&&o===0},Ae=function(e,t){var r=t.displayCheck,o=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=F.call(e,"details>summary:first-of-type"),n=s?e.parentElement:e;if(F.call(n,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var f=e;e;){var l=e.parentElement,b=x(e);if(l&&!l.shadowRoot&&o(l)===!0)return J(e);e.assignedSlot?e=e.assignedSlot:!l&&b!==e.ownerDocument?e=b.host:e=l}e=f}if(Ce(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return J(e);return!1},Re=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var o=t.children.item(r);if(o.tagName==="LEGEND")return F.call(t,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}t=t.parentElement}return!1},B=function(e,t){return!(t.disabled||K(t)||Te(t)||Ae(t,e)||Se(t)||Re(t))},G=function(e,t){return!(Pe(t)||ue(t)<0||!B(e,t))},De=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},ke=function a(e){var t=[],r=[];return e.forEach(function(o,s){var n=!!o.scopeParent,f=n?o.scopeParent:o,l=ue(f,n),b=n?a(o.candidates):f;l===0?n?t.push.apply(t,b):t.push(f):r.push({documentOrder:s,tabIndex:l,item:o,isScope:n,content:b})}),r.sort(we).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(t)},Oe=function(e,t){t=t||{};var r;return t.getShadowRoot?r=oe([e],t.includeContainer,{filter:G.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:De}):r=ie(e,t.includeContainer,G.bind(null,t)),ke(r)},Ie=function(e,t){t=t||{};var r;return t.getShadowRoot?r=oe([e],t.includeContainer,{filter:B.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=ie(e,t.includeContainer,B.bind(null,t)),r},O=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return F.call(e,L)===!1?!1:G(t,e)},Le=ae.concat("iframe").join(","),$=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return F.call(e,Le)===!1?!1:B(t,e)};/*!
* focus-trap 7.4.3
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Q(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),t.push.apply(t,r)}return t}function _(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Q(Object(t),!0).forEach(function(r){xe(a,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Q(Object(t)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(t,r))})}return a}function xe(a,e,t){return e=Be(e),e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function Ke(a,e){if(typeof a!="object"||a===null)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var r=t.call(a,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function Be(a){var e=Ke(a,"string");return typeof e=="symbol"?e:String(e)}var ee={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r.pause()}var o=e.indexOf(t);o===-1||e.splice(o,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},Me=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},je=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},D=function(e){return e.key==="Tab"||e.keyCode===9},Ue=function(e){return D(e)&&!e.shiftKey},qe=function(e){return D(e)&&e.shiftKey},te=function(e){return setTimeout(e,0)},re=function(e,t){var r=-1;return e.every(function(o,s){return t(o)?(r=s,!1):!0}),r},R=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return typeof e=="function"?e.apply(void 0,r):e},I=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},$e=[],Ge=function(e,t){var r=(t==null?void 0:t.document)||document,o=(t==null?void 0:t.trapStack)||$e,s=_({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Ue,isKeyBackward:qe},t),n={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},f,l=function(i,u,c){return i&&i[u]!==void 0?i[u]:s[c||u]},b=function(i,u){var c=typeof(u==null?void 0:u.composedPath)=="function"?u.composedPath():void 0;return n.containerGroups.findIndex(function(d){var v=d.container,m=d.tabbableNodes;return v.contains(i)||(c==null?void 0:c.includes(v))||m.find(function(g){return g===i})})},w=function(i){var u=s[i];if(typeof u=="function"){for(var c=arguments.length,d=new Array(c>1?c-1:0),v=1;v<c;v++)d[v-1]=arguments[v];u=u.apply(void 0,d)}if(u===!0&&(u=void 0),!u){if(u===void 0||u===!1)return u;throw new Error("`".concat(i,"` was specified but was not a node, or did not return a node"))}var m=u;if(typeof u=="string"&&(m=r.querySelector(u),!m))throw new Error("`".concat(i,"` as selector refers to no known node"));return m},p=function(){var i=w("initialFocus");if(i===!1)return!1;if(i===void 0||!$(i,s.tabbableOptions))if(b(r.activeElement)>=0)i=r.activeElement;else{var u=n.tabbableGroups[0],c=u&&u.firstTabbableNode;i=c||w("fallbackFocus")}if(!i)throw new Error("Your focus-trap needs to have at least one focusable element");return i},y=function(){if(n.containerGroups=n.containers.map(function(i){var u=Oe(i,s.tabbableOptions),c=Ie(i,s.tabbableOptions);return{container:i,tabbableNodes:u,focusableNodes:c,firstTabbableNode:u.length>0?u[0]:null,lastTabbableNode:u.length>0?u[u.length-1]:null,nextTabbableNode:function(v){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,g=c.findIndex(function(N){return N===v});if(!(g<0))return m?c.slice(g+1).find(function(N){return O(N,s.tabbableOptions)}):c.slice(0,g).reverse().find(function(N){return O(N,s.tabbableOptions)})}}}),n.tabbableGroups=n.containerGroups.filter(function(i){return i.tabbableNodes.length>0}),n.tabbableGroups.length<=0&&!w("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},T=function h(i){if(i!==!1&&i!==r.activeElement){if(!i||!i.focus){h(p());return}i.focus({preventScroll:!!s.preventScroll}),n.mostRecentlyFocusedNode=i,Me(i)&&i.select()}},S=function(i){var u=w("setReturnFocus",i);return u||(u===!1?!1:i)},E=function(i){var u=I(i);if(!(b(u,i)>=0)){if(R(s.clickOutsideDeactivates,i)){f.deactivate({returnFocus:s.returnFocusOnDeactivate});return}R(s.allowOutsideClick,i)||i.preventDefault()}},k=function(i){var u=I(i),c=b(u,i)>=0;c||u instanceof Document?c&&(n.mostRecentlyFocusedNode=u):(i.stopImmediatePropagation(),T(n.mostRecentlyFocusedNode||p()))},P=function(i){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=I(i);y();var d=null;if(n.tabbableGroups.length>0){var v=b(c,i),m=v>=0?n.containerGroups[v]:void 0;if(v<0)u?d=n.tabbableGroups[n.tabbableGroups.length-1].lastTabbableNode:d=n.tabbableGroups[0].firstTabbableNode;else if(u){var g=re(n.tabbableGroups,function(j){var U=j.firstTabbableNode;return c===U});if(g<0&&(m.container===c||$(c,s.tabbableOptions)&&!O(c,s.tabbableOptions)&&!m.nextTabbableNode(c,!1))&&(g=v),g>=0){var N=g===0?n.tabbableGroups.length-1:g-1,le=n.tabbableGroups[N];d=le.lastTabbableNode}else D(i)||(d=m.nextTabbableNode(c,!1))}else{var A=re(n.tabbableGroups,function(j){var U=j.lastTabbableNode;return c===U});if(A<0&&(m.container===c||$(c,s.tabbableOptions)&&!O(c,s.tabbableOptions)&&!m.nextTabbableNode(c))&&(A=v),A>=0){var fe=A===n.tabbableGroups.length-1?0:A+1,de=n.tabbableGroups[fe];d=de.firstTabbableNode}else D(i)||(d=m.nextTabbableNode(c))}}else d=w("fallbackFocus");d&&(D(i)&&i.preventDefault(),T(d))},V=function(i){if(je(i)&&R(s.escapeDeactivates,i)!==!1){i.preventDefault(),f.deactivate();return}(s.isKeyForward(i)||s.isKeyBackward(i))&&P(i,s.isKeyBackward(i))},W=function(i){var u=I(i);b(u,i)>=0||R(s.clickOutsideDeactivates,i)||R(s.allowOutsideClick,i)||(i.preventDefault(),i.stopImmediatePropagation())},X=function(){if(n.active)return ee.activateTrap(o,f),n.delayInitialFocusTimer=s.delayInitialFocus?te(function(){T(p())}):T(p()),r.addEventListener("focusin",k,!0),r.addEventListener("mousedown",E,{capture:!0,passive:!1}),r.addEventListener("touchstart",E,{capture:!0,passive:!1}),r.addEventListener("click",W,{capture:!0,passive:!1}),r.addEventListener("keydown",V,{capture:!0,passive:!1}),f},Y=function(){if(n.active)return r.removeEventListener("focusin",k,!0),r.removeEventListener("mousedown",E,!0),r.removeEventListener("touchstart",E,!0),r.removeEventListener("click",W,!0),r.removeEventListener("keydown",V,!0),f},ce=function(i){var u=i.some(function(c){var d=Array.from(c.removedNodes);return d.some(function(v){return v===n.mostRecentlyFocusedNode})});u&&T(p())},M=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ce):void 0,C=function(){M&&(M.disconnect(),n.active&&!n.paused&&n.containers.map(function(i){M.observe(i,{subtree:!0,childList:!0})}))};return f={get active(){return n.active},get paused(){return n.paused},activate:function(i){if(n.active)return this;var u=l(i,"onActivate"),c=l(i,"onPostActivate"),d=l(i,"checkCanFocusTrap");d||y(),n.active=!0,n.paused=!1,n.nodeFocusedBeforeActivation=r.activeElement,u==null||u();var v=function(){d&&y(),X(),C(),c==null||c()};return d?(d(n.containers.concat()).then(v,v),this):(v(),this)},deactivate:function(i){if(!n.active)return this;var u=_({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},i);clearTimeout(n.delayInitialFocusTimer),n.delayInitialFocusTimer=void 0,Y(),n.active=!1,n.paused=!1,C(),ee.deactivateTrap(o,f);var c=l(u,"onDeactivate"),d=l(u,"onPostDeactivate"),v=l(u,"checkCanReturnFocus"),m=l(u,"returnFocus","returnFocusOnDeactivate");c==null||c();var g=function(){te(function(){m&&T(S(n.nodeFocusedBeforeActivation)),d==null||d()})};return m&&v?(v(S(n.nodeFocusedBeforeActivation)).then(g,g),this):(g(),this)},pause:function(i){if(n.paused||!n.active)return this;var u=l(i,"onPause"),c=l(i,"onPostPause");return n.paused=!0,u==null||u(),Y(),C(),c==null||c(),this},unpause:function(i){if(!n.paused||!n.active)return this;var u=l(i,"onUnpause"),c=l(i,"onPostUnpause");return n.paused=!1,u==null||u(),y(),X(),C(),c==null||c(),this},updateContainerElements:function(i){var u=[].concat(i).filter(Boolean);return n.containers=u.map(function(c){return typeof c=="string"?r.querySelector(c):c}),n.active&&y(),C(),this}},f.updateContainerElements(e),f};function Je(a={}){let e;const{immediate:t,...r}=a,o=Z(!1),s=Z(!1),n=p=>e==null?void 0:e.activate(p),f=p=>{e==null||e.deactivate(p)},l=()=>{e&&(e.pause(),s.set(!0))},b=()=>{e&&(e.unpause(),s.set(!1))};return{useFocusTrap:p=>(e=Ge(p,{...r,onActivate(){var y;o.set(!0),(y=a.onActivate)==null||y.call(a)},onDeactivate(){var y;o.set(!1),(y=a.onDeactivate)==null||y.call(a)}}),t&&n(),{destroy(){f(),e=void 0}}),hasFocus:z(o),isPaused:z(s),activate:n,deactivate:f,pause:l,unpause:b}}const Qe=(a,e="body")=>{let t;async function r(s){if(e=s,typeof e=="string"){if(t=document.querySelector(e),t===null&&(await pe(),t=document.querySelector(e)),t===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)t=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);t.appendChild(a),a.hidden=!1}function o(){a.remove()}return r(e),{update:r,destroy:o}};export{Je as c,ze as g,He as r,Ze as s,Qe as u};
